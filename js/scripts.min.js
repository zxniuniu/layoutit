function handleSaveLayout(){var a=$(".demo").html();if(a!=window.demoHtml){saveLayout();window.demoHtml=a}}function handleJsIds(){handleModalIds();handleAccordionIds();handleCarouselIds();handleTabsIds()}function handleAccordionIds(){var c=$(".demo #myAccordion");var a=randomNumber();var d="panel-"+a;var b;c.attr("id",d);c.find(".panel").each(function(g,f){b="panel-element-"+randomNumber();$(f).find(".panel-title").each(function(i,h){$(h).attr("data-parent","#"+d);$(h).attr("href","#"+b)});$(f).find(".panel-collapse").each(function(i,h){$(h).attr("id",b)})})}function handleCarouselIds(){var b=$(".demo #myCarousel");var a=randomNumber();var c="carousel-"+a;b.attr("id",c);b.find(".carousel-indicators li").each(function(f,d){$(d).attr("data-target","#"+c)});b.find(".left").attr("href","#"+c);b.find(".right").attr("href","#"+c)}function handleModalIds(){var c=$(".demo #myModalLink");var a=randomNumber();var d="modal-container-"+a;var b="modal-"+a;c.attr("id",b);c.attr("href","#"+d);c.next().attr("id",d)}function handleTabsIds(){var b=$(".demo #myTabs");var a=randomNumber();var c="tabs-"+a;b.attr("id",c);b.find(".tab-pane").each(function(g,d){var h=$(d).attr("id");var f="panel-"+randomNumber();$(d).attr("id",f);$(d).parent().parent().find("a[href=#"+h+"]").attr("href","#"+f)})}function randomNumber(){return randomFromInterval(1,1000000)}function randomFromInterval(b,a){return Math.floor(Math.random()*(a-b+1)+b)}function gridSystemGenerator(){$(".lyrow .preview input").bind("keyup",function(){var c=0;var a="";var d=false;var b=$(this).val().split(" ",12);$.each(b,function(f,e){if(!d){if(parseInt(e)<=0){d=true}c=c+parseInt(e);a+='<div class="col-md-'+e+' column"></div>'}});if(c==12&&!d){$(this).parent().next().children().html(a);$(this).parent().prev().show()}else{$(this).parent().prev().hide()}})}function configurationElm(b,a){$(".demo").delegate(".configuration > a","click",function(d){d.preventDefault();var c=$(this).parent().next().next().children();$(this).toggleClass("active");c.toggleClass($(this).attr("rel"))});$(".demo").delegate(".configuration .dropdown-menu a","click",function(f){f.preventDefault();var c=$(this).parent().parent();var g=c.parent().parent().next().next().children();c.find("li").removeClass("active");$(this).parent().addClass("active");var d="";c.find("a").each(function(){d+=$(this).attr("rel")+" "});c.parent().removeClass("open");g.removeClass(d);g.addClass($(this).attr("rel"))})}function removeElm(){$(".demo").delegate(".remove","click",function(a){a.preventDefault();$(this).parent().remove();if(!$(".demo .lyrow").length>0){clearDemo()}})}function clearDemo(){$(".demo").empty()}function removeMenuClasses(){$("#menu-layoutit li button").removeClass("active")}function changeStructure(b,a){$("#download-layout ."+b).removeClass(b).addClass(a)}function cleanHtml(a){$(a).parent().append($(a).children().html())}function downloadLayoutSrc(){var b="";$("#download-layout").children().html($(".demo").html());var a=$("#download-layout").children();a.find(".preview, .configuration, .drag, .remove").remove();a.find(".lyrow").addClass("removeClean");a.find(".box-element").addClass("removeClean");a.find(".lyrow .lyrow .lyrow .lyrow .lyrow .removeClean").each(function(){cleanHtml(this)});a.find(".lyrow .lyrow .lyrow .lyrow .removeClean").each(function(){cleanHtml(this)});a.find(".lyrow .lyrow .lyrow .removeClean").each(function(){cleanHtml(this)});a.find(".lyrow .lyrow .removeClean").each(function(){cleanHtml(this)});a.find(".lyrow .removeClean").each(function(){cleanHtml(this)});a.find(".removeClean").each(function(){cleanHtml(this)});a.find(".removeClean").remove();$("#download-layout .column").removeClass("ui-sortable");$("#download-layout .row-fluid").removeClass("clearfix").children().removeClass("column");if($("#download-layout .container").length>0){changeStructure("row-fluid","row")}formatSrc=$.htmlClean($("#download-layout").html(),{format:true,allowedAttributes:[["id"],["class"],["data-toggle"],["data-target"],["data-parent"],["role"],["data-dismiss"],["aria-labelledby"],["aria-hidden"],["data-slide-to"],["data-slide"]]});$("#download-layout").html(formatSrc);$("#downloadModal textarea").empty();$("#downloadModal textarea").val(formatSrc)}var currentDocument=null;var timerSave=2000;var demoHtml=$(".demo").html();$(window).resize(function(){$("body").css("min-height",$(window).height()-90);$(".demo").css("min-height",$(window).height()-160)});$(document).ready(function(){$("body").css("min-height",$(window).height()-90);$(".demo").css("min-height",$(window).height()-160);$(".demo, .demo .column").sortable({connectWith:".column",opacity:0.35,handle:".drag"});$(".sidebar-nav .lyrow").draggable({connectToSortable:".demo",helper:"clone",handle:".drag",drag:function(b,a){a.helper.width(400)},stop:function(b,a){$(".demo .column").sortable({opacity:0.35,connectWith:".column"})}});$(".sidebar-nav .box").draggable({connectToSortable:".column",helper:"clone",handle:".drag",drag:function(b,a){a.helper.width(400)},stop:function(){handleJsIds()}});$("[data-target=#downloadModal]").click(function(a){a.preventDefault();downloadLayoutSrc()});$("#download").click(function(){downloadLayout();return false});$("#downloadhtml").click(function(){downloadHtmlLayout();return false});$("#edit").click(function(){$("body").removeClass("devpreview sourcepreview");$("body").addClass("edit");removeMenuClasses();$(this).addClass("active");return false});$("#clear").click(function(a){a.preventDefault();clearDemo()});$("#devpreview").click(function(){$("body").removeClass("edit sourcepreview");$("body").addClass("devpreview");removeMenuClasses();$(this).addClass("active");return false});$("#sourcepreview").click(function(){$("body").removeClass("edit");$("body").addClass("devpreview sourcepreview");removeMenuClasses();$(this).addClass("active");return false});$(".nav-header").click(function(){$(".sidebar-nav .boxes, .sidebar-nav .rows").hide();$(this).next().slideDown()});removeElm();configurationElm();gridSystemGenerator();setInterval(function(){handleSaveLayout()},timerSave)});